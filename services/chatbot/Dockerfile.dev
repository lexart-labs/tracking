FROM node:20-alpine AS deps
WORKDIR /app
COPY package*.json ./
RUN npm i

RUN addgroup -S appgroup && adduser -S appuser -G appgroup

USER appuser
EXPOSE 3000

CMD [ "node", "src/server.js" ]